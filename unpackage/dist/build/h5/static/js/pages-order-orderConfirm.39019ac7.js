(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-orderConfirm"],{"0ab8":function(t,a,e){"use strict";var i=e("651b"),o=e.n(i);o.a},"0c10":function(t,a,e){"use strict";e.r(a);var i=e("9d88"),o=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=o.a},"57a9":function(t,a,e){"use strict";e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){return i}));var i={uIcon:e("01ab").default,uGap:e("f516").default,uPopup:e("3433").default,uButton:e("6063").default},o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"order_hd"},[e("v-uni-view",{staticClass:"shopbox"},[t._l(t.list.product_arr,(function(a,i){return t.buyshow?e("v-uni-view",{key:i,staticClass:"box"},[e("v-uni-view",{staticClass:"imgwrap"},[e("v-uni-image",{attrs:{src:a.images,mode:"aspectFill"}})],1),e("v-uni-view",{staticClass:"info"},[e("v-uni-text",{staticClass:"title"},[t._v(t._s(a.title))]),e("v-uni-view",{staticClass:"price"},[t._v("￥"),e("v-uni-text",{staticClass:"bold"},[t._v(t._s(a.total_price))])],1),e("v-uni-text",{staticClass:"num"},[t._v("×"+t._s(a.buy_number))])],1)],1):t._e()})),t._l(t.list,(function(a,i){return t.goshow?e("v-uni-view",{key:i,staticClass:"box"},[t._l(a.pic_arr,(function(a,i){return 0==i?e("v-uni-view",{key:i,staticClass:"imgwrap"},[e("v-uni-image",{attrs:{src:a.domain+a.path.substr(1),mode:"aspectFill"}})],1):t._e()})),e("v-uni-view",{staticClass:"info"},[e("v-uni-text",{staticClass:"title"},[t._v(t._s(a.product_info.title))]),e("v-uni-view",{staticClass:"price"},[t._v("￥"),e("v-uni-text",{staticClass:"bold"},[t._v(t._s(a.sku_info.price))])],1),e("v-uni-text",{staticClass:"num"},[t._v("×"+t._s(a.stock))])],1)],2):t._e()}))],2),e("v-uni-view",{staticClass:"address_box obox"},[e("v-uni-view",{staticClass:"title"},[t._v("收件信息")]),e("v-uni-view",{staticClass:"address_info"},[0==t.addresslist.length?e("v-uni-button",{staticClass:"btn_primary",attrs:{type:"default"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goAddress.apply(void 0,arguments)}}},[t._v("新建收件人信息")]):t._l(t.addresslist,(function(a,i){return e("v-uni-view",{key:i,staticClass:"itop",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goAddress.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"left"},[e("v-uni-view",{staticClass:"text"},[e("v-uni-text",[t._v("收货人："+t._s(a.name))]),e("v-uni-text",{staticClass:"phone"},[t._v("联系方式："+t._s(a.number))])],1),e("v-uni-view",{staticClass:"text"},[t._v("收货地址："+t._s(a.province)+t._s(a.city)+t._s(a.area)+t._s(a.address))])],1),e("u-icon",{attrs:{name:"arrow-right",size:"22",color:"#FF9D00"}})],1)}))],2)],1)],1),e("u-gap",{attrs:{height:"80"}}),e("v-uni-view",{staticClass:"btn_actions"},[e("v-uni-view",{staticClass:"total"},[e("v-uni-text",[t._v("合计")]),e("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(t.totals))])],1),e("v-uni-button",{staticClass:"btn_primary",attrs:{type:"default"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onSubmit.apply(void 0,arguments)}}},[t._v("提交订单")])],1),e("u-popup",{staticClass:"paypopup",attrs:{mode:"bottom",closeable:!0,"close-icon-pos":"top-left","border-radius":"40"},model:{value:t.payshow,callback:function(a){t.payshow=a},expression:"payshow"}},[e("v-uni-view",{staticClass:"popupcon"},[e("v-uni-view",{staticClass:"price"},[t._v("￥"+t._s(t.totals))]),e("v-uni-view",{staticClass:"paytit"},[t._v("选择支付方式")]),e("v-uni-view",{staticClass:"typebox"},t._l(t.typelist,(function(a,i){return e("v-uni-view",{key:i,staticClass:"item",class:{active:t.cur==i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tab(i,a.type)}}},[e("u-icon",{attrs:{name:a.icon,size:"38"}}),e("v-uni-text",{staticClass:"label"},[t._v(t._s(a.title))]),e("v-uni-view",{staticClass:"icon"})],1)})),1),e("u-gap",{attrs:{height:"120"}}),e("u-button",{staticClass:"btn_primary",attrs:{ripple:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.pay.apply(void 0,arguments)}}},[t._v("立即支付")])],1)],1)],1)},n=[]},"651b":function(t,a,e){var i=e("cc7c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("2bcc6b04",i,!0,{sourceMap:!1,shadowMode:!1})},"9d88":function(t,a,e){"use strict";e("4de4"),e("4160"),e("a15b"),e("d81d"),e("b680"),e("d3b7"),e("acd8"),e("25f0"),e("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={data:function(){return{list:[],addresslist:[],totals:0,remark:"",typelist:[{title:"微信支付",icon:"/static/img/icon_wechat.png",type:"wechat"},{title:"支付宝支付",icon:"/static/img/icon_alipay.png",type:"ali"},{title:"余额支付",icon:"/static/img/icon_money.png",type:"balance"}],cur:0,orderid:0,payway:"wechat",payshow:!1,isOrder:!1,goshow:!1,buyshow:!1,cartarr:""}},computed:{total:function(){var t=0;return this.list.forEach((function(a){t+=parseFloat(a.sku_info.price)})),0==t?0:t.toFixed(2)}},methods:{getAddress:function(){var t=this;this.$api.http.addresslist().then((function(a){if(200==a.code){var e=a.data,i=e.filter((function(t){return 1==t.is_default}));t.addresslist=i}}))},goAddress:function(){uni.navigateTo({url:"/pages/address/index"})},onSubmit:function(){var t=this,a=[],e=0,i=uni.getStorageSync("isbuy");if("1"==i)a=this.cartarr;else if(this.list.length>0){var o=[];this.list.map((function(t){o.push(t.cart_id)})),a=o.join(",")}if(this.addresslist.length>0&&(e=this.addresslist[0].address_id),0==e)return uni.showToast({title:"请填写收货地址"}),!1;0==this.isOrder?this.$api.http.postOrder(a,e,this.remark).then((function(a){if(200==a.code){t.orderid=a.data.order_id;a.data.order_no;t.isOrder=!0,t.payshow=!0}else uni.showToast({title:a.message,icon:"none"})})):this.payshow=!0},tab:function(t,a){this.cur=t,this.payway=a},pay:function(){var t=this;this.$api.http.payOrder(this.orderid,this.payway).then((function(a){if(uni.removeStorageSync("cartlist"),uni.removeStorageSync("address"),401==a.code)uni.showToast({title:a.message,icon:"none"});else if("ali"==t.payway){var e=document.createElement("div");e.innerHTML=a.message,document.body.appendChild(e),document.forms[0].submit()}else if("wechat"==t.payway){var i=a.data;jWeixin.config({debug:!1,appId:i.appId,timestamp:i.timeStamp.toString(),nonceStr:i.nonceStr,signature:i.paySign,jsApiList:["chooseWXPay"]}),jWeixin.ready((function(){jWeixin.chooseWXPay({timestamp:i.timeStamp.toString(),nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(t){window.location.href=window.location.origin+"/#/pages/order/order?type=2"},fail:function(t){console.log("支付失败"),window.location.href=window.location.origin+"/#/pages/order/order"},complete:function(t){console.log(t,"complete")}})}))}else uni.showToast({title:"支付成功",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/order/order?type=2"})}),800)}))}},onShow:function(){var t=uni.getStorageSync("isbuy"),a=uni.getStorageSync("blist");if("1"==t)if(a){this.buyshow=!0,this.list=JSON.parse(a.data);var e=0;this.list.product_arr.forEach((function(t){e+=parseFloat(t.total_price)})),0!=e&&parseFloat(e).toFixed(2),this.totals=e,this.cartarr=a.cartarr}else uni.navigateBack();else{this.goshow=!0;var i=uni.getStorageSync("cartlist");i?(this.list=JSON.parse(i.data),this.totals=parseFloat(i.total).toFixed(2)):uni.navigateBack()}var o=uni.getStorageSync("address");o?this.addresslist=JSON.parse(o):this.getAddress()}};a.default=i},cc7c:function(t,a,e){var i=e("24fb"),o=e("1de5"),n=e("ba34");a=i(!1);var s=o(n);a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-1aaafb5e]{padding:%?18?% %?24?%}.order_hd[data-v-1aaafb5e]{position:relative}.order_hd .shopbox[data-v-1aaafb5e]{background:#fff;border-radius:%?18?%;box-shadow:%?0?% %?2?% %?4?% %?0?% rgba(0,0,0,.16);padding:0 %?53?% 0 %?31?%}.order_hd .shopbox .box[data-v-1aaafb5e]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?31?% 0;border-bottom:%?2?% #eee solid}.order_hd .shopbox .box .imgwrap[data-v-1aaafb5e]{width:%?132?%;height:%?132?%;-webkit-flex-shrink:0;flex-shrink:0;background:#eee;border-radius:%?18?%}.order_hd .shopbox .box .imgwrap uni-image[data-v-1aaafb5e]{width:100%;height:100%}.order_hd .shopbox .box .info[data-v-1aaafb5e]{margin-left:%?29?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.order_hd .shopbox .box .info .title[data-v-1aaafb5e]{height:%?67?%;font-size:%?22?%;color:#000;margin-bottom:%?4?%}.order_hd .shopbox .box .info .price[data-v-1aaafb5e]{font-size:%?22?%;color:#fd4e1f}.order_hd .shopbox .box .info .price .bold[data-v-1aaafb5e]{font-weight:700}.order_hd .shopbox .box .info .num[data-v-1aaafb5e]{font-size:%?18?%;color:#707070;margin-top:%?7?%}.order_hd .shopbox .box[data-v-1aaafb5e]:last-child{border-bottom:0}.address_box[data-v-1aaafb5e]{background:url('+s+') no-repeat;background-size:100% 100%;margin-top:%?22?%;padding:%?27?% 0 %?45?%;height:%?214?%}.address_box .address_info[data-v-1aaafb5e]{margin:%?30?% %?58?% 0}.address_box .address_info .itop[data-v-1aaafb5e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.address_box .address_info .itop .left[data-v-1aaafb5e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?22?%;color:#000}.address_box .address_info .itop .left .text[data-v-1aaafb5e]{margin-bottom:%?13?%}.address_box .address_info .itop .left .text .phone[data-v-1aaafb5e]{margin-left:%?54?%}.address_box .address_info .btn_primary[data-v-1aaafb5e]{height:%?62?%;line-height:%?62?%;font-size:%?22?%;color:#fff;background:#ff9d00;border-radius:%?18?%}.obox .title[data-v-1aaafb5e]{font-size:%?25?%;color:#000;font-weight:700;padding-left:%?36?%;position:relative}.obox .title[data-v-1aaafb5e]::after{content:"";width:%?9?%;height:%?31?%;opacity:1;background:#ff9d00;position:absolute;top:0;left:%?4?%}.btn_actions[data-v-1aaafb5e]{position:fixed;bottom:0;left:0;width:100%;height:%?80?%;background:#fff;box-shadow:%?0?% %?-2?% %?4?% %?0?% rgba(0,0,0,.16);z-index:50;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn_actions .total[data-v-1aaafb5e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?18?%;color:#000;padding-left:%?49?%}.btn_actions .total .price[data-v-1aaafb5e]{font-size:%?22?%;color:#fd4e1f;font-weight:700;margin-left:%?9?%}.btn_actions .btn_primary[data-v-1aaafb5e]{width:%?505?%;height:%?80?%;line-height:%?80?%;text-align:center;font-size:%?22?%;color:#fff;background:#ff9d00;border-radius:0}.paypopup[data-v-1aaafb5e] .u-close--top-left{left:%?60?%}.paypopup .popupcon[data-v-1aaafb5e]{padding-left:%?60?%}.paypopup .popupcon .price[data-v-1aaafb5e]{text-align:center;font-size:%?27?%;color:#fd4e1f;font-weight:700;padding-top:%?65?%;padding-bottom:%?15?%;border-bottom:%?2?% solid #e5e5e5}.paypopup .popupcon .paytit[data-v-1aaafb5e]{padding:%?15?% 0 %?28?%;font-size:%?31?%;color:#141313;text-align:center;font-weight:700}.paypopup .popupcon .typebox[data-v-1aaafb5e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;position:relative;padding-bottom:%?38?%}.paypopup .popupcon .typebox .item[data-v-1aaafb5e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?21?% %?56?% %?21?% 0}.paypopup .popupcon .typebox .item .label[data-v-1aaafb5e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?18?%;font-size:%?27?%;color:#141313}.paypopup .popupcon .typebox .item .icon[data-v-1aaafb5e]{width:%?33?%;height:%?33?%}.paypopup .popupcon .typebox .item.active .icon[data-v-1aaafb5e]{background:url(/static/img/icon_checked.png) no-repeat;background-size:100% 100%}.paypopup .popupcon .coupons[data-v-1aaafb5e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?23?% %?56?% %?50?% 0}.paypopup .popupcon .coupons .label[data-v-1aaafb5e]{font-size:%?22?%;color:#ff1e10;font-weight:700}.paypopup .popupcon .coupons .right[data-v-1aaafb5e]{font-size:%?22?%;color:#ababab;font-weight:700}.paypopup .popupcon .btn_primary[data-v-1aaafb5e]{position:fixed;bottom:0;left:0;right:0;z-index:20;width:100%;height:%?80?%;line-height:%?80?%;font-size:%?22?%;color:#fff;text-align:center;background:#ff9d00;border-radius:0}',""]),t.exports=a},f217:function(t,a,e){"use strict";e.r(a);var i=e("57a9"),o=e("0c10");for(var n in o)"default"!==n&&function(t){e.d(a,t,(function(){return o[t]}))}(n);e("0ab8");var s,r=e("f0c5"),d=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"1aaafb5e",null,!1,i["a"],s);a["default"]=d.exports}}]);